{% if cardinality == 1 %}
  // Preprocess {{ field_name }}.
  $vars['{{ map }}'] = array(
    'label' => isset($vars['{{ field_name }}'][0]['title']) ? $vars['{{ field_name }}'][0]['title'] : '',
    'url' => isset($vars['{{ field_name }}'][0]['url']) ? url($vars['{{ field_name }}'][0]['url'], array('absolute' => TRUE) + $vars['{{ field_name }}'][0]['attributes']) : '',
  );
{% else %}
  // Preprocess {{ field_name }}.
  $vars['{{ map }}'] = array();
  if(!empty($vars['{{ field_name }}'])) {
    foreach($vars['{{ field_name }}'] as $value) {
      $vars['{{ map }}'][] = array(
        'label' => $value['title'],
        'url' => $value['url'],
      );
    }
  }
{% endif %}
